# Message processing microservice


## Реализация микросервиса для обработки сообщений

Производится имитация проверки данных клиента и получения решения с одобрением или отказом.  Данный микросервис принимает сообщения через HTTP API, сохраняет данные в базу Postgres и отправляет запрос на сторонний сервис для обработки используя шину Kafka. После обработки, получаем решение обратно через HTTP API и вносим результат в базу. Сервис предоставляет возможность добавлять нового клиента, вносить изменения в его данные и удалять клиента из базы. Предоставлен сервис получения статистики с результатами обработки по всем клиентам.


Используемые технологии:
- PostgreSQL (в качестве основного хранилища данных)
- Docker (для запуска сервиса)
- Gin (веб фреймворк)
- golang-migrate/migrate (для миграций БД)
- sqlx (драйвер для работы с PostgreSQL)

Сервис был написан с Clean Architecture, что позволяет легко расширять функционал сервиса и тестировать его.
Также был реализован Graceful Shutdown для корректного завершения работы сервиса.


# Getting Started

Перед запуском сервиса необходимо просмотреть параметры подключения, указанные в файле docker-compose.yaml и при необходимости заменить переменные окружения Postgres, а также проверить порты для работы приложения. Режим запуска фреймворка Gin (по умолчанию Debuger) определяется через config.yaml файл в директории messaggio_registry. Там же можно выставить необходимый уровень логирования.

# Usage

Для просмотра всех доступных команд используйте `make help`

Собрать и запустить сервис можно с помощью команд `make build && make up`

Для просмотра методов и работы с ними через Postman можно импортировать файл messaggio.postman_collection.json

Также после запуска есть возмножность подключиться к Kafka через UI по адресу localhost:8080, где можно просмотреть подробности состояния брокера и подключений .
